use BOT;

UPDATE USER SET AUTHENTICATION = 1 
WHERE 
(TEL_NUMBER = 'whatsapp:+5519993070538' and AUTHENTICATION_KEY = '443672fa-01fe-4b51-9cc7-1d9eba955324');


drop table COMMANDS_USER;
drop table BLACKLIST;
drop table COMMANDS;
drop table user;

SELECT * FROM USER;
SELECT * FROM COMMANDS_USER;
select * from blacklist;

INSERT INTO COMMANDS_USER (ID_COMMAND, ID_USER, TYPEOF, PROMPT, OCCASION) 
VALUES (1, "whatsapp:+5519993070538", "champions", "palmeiras", "2009-09-17");

INSERT INTO BLACKLIST (ID_USER, ID_COMMAND, CONT, TIME, DESCRIPTION) 
VALUES ("whatsapp:+5519993070538", "1", 0, "2022/10/04 21:19:51", "pau");


SELECT * FROM COMMANDS;
INSERT INTO COMMANDS (COMMANDS_NAME, DESCRIPTION, STATUS) 
VALUES ('help futebol', 'Exibe todos comandos relacionados a tag "futebol"', 1);
INSERT INTO COMMANDS (COMMANDS_NAME, DESCRIPTION, STATUS) 
VALUES ('help', 'Exibe todos comandos', 1);

CREATE TABLE USER(
TEL_NUMBER VARCHAR(60) PRIMARY KEY NOT NULL,
EMAIL VARCHAR(255) NOT NULL,
AUTHENTICATION_KEY VARCHAR(255) NOT NULL,
AUTHENTICATION BOOLEAN,
USER_NAME VARCHAR(30) NOT NULL);

CREATE TABLE COMMANDS(
ID INT PRIMARY KEY AUTO_INCREMENT,
COMMANDS_NAME VARCHAR(255) NOT NULL,
DESCRIPTION VARCHAR(255),
STATUS BOOLEAN);

CREATE TABLE COMMANDS_USER(
ID INT PRIMARY KEY AUTO_INCREMENT,
ID_COMMAND INT NOT NULL,
ID_USER VARCHAR(60) NOT NULL,
TYPEOF VARCHAR(30),
PROMPT VARCHAR(255),
OCCASION DATETIME,
FOREIGN KEY(ID_USER) REFERENCES USER(TEL_NUMBER),
FOREIGN KEY(ID_COMMAND) REFERENCES COMMANDS(ID));

CREATE TABLE BLACKLIST(
ID_USER VARCHAR(60),
ID_COMMAND INT,
CONT INT,
TIME DATETIME,
DESCRIPTION VARCHAR(255),
FOREIGN KEY(ID_USER) REFERENCES USER(TEL_NUMBER),
FOREIGN KEY(ID_COMMAND) REFERENCES COMMANDS(ID));

